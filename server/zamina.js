const mysql = require("mysql2/promise");const config = require("./config");// ----------------------- Async Main Function -----------------------module.exports = {  main: async function main(date) {    let arr = [];    let str = `<div class="zamina__main wow fadeIn">  <div class="zamina__text">  <div class="zamina__element"><em><strong>Група</strong></em></div>  <div class="zamina__element"><em><strong>Пара</strong></em></div>  <div class="zamina__element"><em><strong>З кого</strong></em></div>  <div class="zamina__element"><em><strong>На кого</strong></em></div>  <div class="zamina__element"><em><strong>Причина</strong></em></div>  </div>`;    arr.push(str);    const connection = await mysql.createConnection(config);    const [rows1, field1] = await connection.execute(      `SELECT * FROM dm_couples_changes WHERE date='${date}' ORDER BY dm_couples_changes.group, dm_couples_changes.number`    );    if (rows1 == "") {      arr = [];      str = `<div class="zamina__main">    <div class="zamina__null"> Замін не знайдено </div></div>`;      arr.push(str);      connection.end();      return arr;    } else {      let j = 1;      for (i in rows1) {        str = `<div class="zamina__text">      <div class="zamina__element"><b>${j}</b>: ${rows1[i]["group"]}</div>      <div class="zamina__element">${rows1[i]["number"]}</div>`;        if (rows1[i]["type"] == 1) {          let teacher_first = rows1[i]["teacher_first"];          if (rows1[i]["teacher_second"].length > 0)            teacher_first += ", " + rows1[i]["teacher_second"];          str += `<div class="zamina__element">${teacher_first}</div>`;        } else {          str += `<div class="zamina__element">${rows1[i]["why"]}</div>`;        }        let teacher_second = rows1[i]["teacher_first_ZM"];        if (rows1[i]["teacher_second_ZM"].length > 0)          teacher_second += ", " + rows1[i]["teacher_second_ZM"];        str += `<div class="zamina__element">${teacher_second}</div>       <div class="zamina__element">${rows1[i]["why"]}</div></div>`;        arr.push(str);        j++;      }      str = `</div>`;      arr.push(str);      connection.end();      return arr;    }  },  print: async function print(date) {    let arr = [];    let str = `<table width="750" height="350" style="margin: auto;border-collapse: collapse;font-size:16px;">    <tr>      <th style="padding: 5px;border: 1px solid black;">Група</th>      <th style="padding: 5px;border: 1px solid black;">Пара</th>      <th style="padding: 5px;border: 1px solid black;">З кого</th>      <th style="padding: 5px;border: 1px solid black;">На кого</th>      <th style="padding: 5px;border: 1px solid black;">Причина</th>    </tr>`;    arr.push(str);    const connection = await mysql.createConnection(config);    const [rows1, field1] = await connection.execute(      `SELECT * FROM dm_couples_changes WHERE date='${date}' ORDER BY dm_couples_changes.group, dm_couples_changes.number`    );    if (rows1 == "") {      arr = [];      str = `<h1 style="text-align:center;">Замін не знайдено</h1>`;      arr.push(str);      connection.end();      return arr;    } else {      let j = 1;      for (i in rows1) {        str = `<tr>        <td style="padding: 5px;border: 1px solid black;">${rows1[i]["group"]}</td>        <td style="padding: 5px;border: 1px solid black;">${rows1[i]["number"]}</td>`;        if (rows1[i]["type"] == 1) {          let teacher_first = rows1[i]["teacher_first"];          if (rows1[i]["teacher_second"].length > 0)            teacher_first += ", " + rows1[i]["teacher_second"];          str += `<td style="padding: 5px;border: 1px solid black;">${teacher_first}</td>`;        } else {          str += `<td style="padding: 5px;border: 1px solid black;">${rows1[i]["why"]}</td>`;        }        let teacher_second = rows1[i]["teacher_first_ZM"];        if (rows1[i]["teacher_second_ZM"].length > 0)          teacher_second += ", " + rows1[i]["teacher_second_ZM"];        str += `<td style="padding: 5px;border: 1px solid black;">${teacher_second}</td>        <td style="padding: 5px;border: 1px solid black;">${rows1[i]["why"]}</td></tr>`;        arr.push(str);        j++;      }      str = `</table>`;      arr.push(str);      connection.end();      return arr;    }  },};